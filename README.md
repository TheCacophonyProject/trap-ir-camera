## Making a new image from scratch
- Install latest Raspberry Pi OS Lite (64 bit). Using rpi-imager press ctrl+shift+x to open the extra settings and set WiFi name, country, and password.
- Insert SD card to Raspberry Pi and power RPi through USB (powering through hat will cause it to restart without attiny installed yet)
- SSH onto the RPi
- `sudo apt update`
- `sudo apt upgrade -y`
- Run `raspi-config` to enable camera, i2c
- `sudo mkdir /etc/cacophony`
- `sudo mkdir /etc/salt`
- Install 
    - go-config
    - event-reporter
    - Management interface from branch ir-camera
    - RTC
    - ATTiny controller
    - device-register and change prefix to trap-ir
    - modemd 1.2.3
- `sudo mkdir /media/cp`
- Add to `/etc/fstab` `LABEL=cp /media/cp auto auto,nofail,noexec,nodev,noatime,nodiratime,umask=000 0 2`
- restart device
- Device register shoudl have changed name so scan using sidekcik to see the devices name.
- `sudo apt install python3-opencv`
- Install salt and configure to connect to cacophony salt https://repo.saltproject.io/#debian
- `sudo apt install python3-pip -y`
- Copy over `ir-camera.service` `main.py` `motion.py` `requirements.txt` 
- `pip3 install -r requirements.txt`

## Making a new image to save
- Make a new image from scratch.
- Add to `/lib/systemd/system/salt-minion.service` `ConditionPathExists=/etc/salt/minion_id`
- Delete `/etc/salt/minion_id`
- Delete device config
